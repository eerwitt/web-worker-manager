/*! web-worker-manager - v0.1.0 - 2014-08-18 */(function(){"use strict";var a,b,c,d=function(a,b){return function(){return a.apply(b,arguments)}};b=null!=b?b:this,a=function(){function a(a){this.workerContext=a,this.registerJob=d(this.registerJob,this),this._onMessage=d(this._onMessage,this),this._jobs={},this.workerContext.onmessage=this._onMessage,this._postMethod=function(a){return this.workerContext.postMessage(a)},this._sendTypedMessage("ready")}return a.prototype._sendTypedMessage=function(a,b){if(null==b&&(b={}),null==a)throw new Error("No messageType specified for the outgoing message.");return this._postMethod({messageType:a,params:b}),!0},a.prototype._onMessage=function(a){var b,c;if(b=null!=a&&null!=(c=a.data)?c.messageType:void 0,null==b)throw new Error("No messageType specified for the incoming message.");if(null==this._jobs[b])throw new Error("No job exists by that jobName");return this._jobs[b](a.data.params,function(a){return function(b,c){return a._sendTypedMessage("progress",{current:b,total:c})}}(this),function(a){return function(b){return a._sendTypedMessage("complete",{payload:b})}}(this),function(a){return function(b){return a._sendTypedMessage("error",{error:b})}}(this))},a.prototype.registerJob=function(a,b){return this._jobs[a]=b},a}(),b.ManagedWebWorker=a,("undefined"==typeof document||null===document)&&(c=new a(this),b.registerJob=c.registerJob)}).call(this);